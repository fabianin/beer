<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.new.nz/thymeleaf/layout">
<head>
<meta charset="UTF-8"></meta>
<title>Lista de Cervejas</title>

	<link rel="stylesheet"
	type="text/css"
	th:href="@{/stylesheets/bootstrap.min.css}"/>
	<script th:src="@{/javascripts/jquery.js}"></script>
	<script th:src="@{/javascripts/bootstrap.min.js}"></script>
</head>
<body>

<div th:replace="navbar :: navbar('listagem')"></div>



<div class="container">

	<span class="row"></span>
	<span class="row"></span>
	<form class="form form-inline col-md-6 col-md-offset-3" th:action="@{/beer/pesquisa}" th:object="${cerveja}">
		<input type="text" name="nome" th:field="*{nome}" class="form-control" placeholder="Nome"/>
		<input type="number" name="volume" th:field="*{volume}" class="form-control" placeholder="Volume"/>
		<input type="submit" class="form-control" value="Pesquisar" id="btn-pesquisa"/>
	</form>
	<div class="col-sm-4 col-sm-offset-4">
		<div class="alert alert-danger" th:if="${not #strings.isEmpty(mensagemE)}">
			<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<span th:text = "${mensagem}"></span>
		</div>
	</div>
	<div class="col-sm-4 col-sm-offset-4">
		<div class="alert alert-success" th:if="${not #strings.isEmpty(mensagemS)}">
			<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<span th:text = "${mensagem}"></span>
		</div>
	</div>
	<span class="row"></span>
	
	<div class="table-responsive">
		<table id="tabela" class="table  table-striped table-bordered table-hover table-condensed">
			<thead>
				<tr>
					<th>Id</th>
					<th>Nome</th>
					<th>Pais Origem</th>
					<th>Volume</th>
					<th>Valor</th>
					<th>Tipo</th>
					<th>Remover</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>oi</td></tr>
				
				
			</tbody>
		</table>
	</div>
</div>
</body>
<script>
	 $(document).ready(function(){
		$('#tabela tbody > tr').remove();
	 	$("#btn-pesquisa").click(function(e){
		 	e.preventDefault();
	 		$.ajax({
		 		type : "GET",
		 		url : "/beer/pesquisa",
		 		data : {
		 			"nome" : $('#nome').val(),
		 		},
		 		success: function(data){
		 			console.log(data);
		 			$('#tabela tbody > tr').remove();
		 			$.each(data, function(i, item){
		 				$('#tabela tbody').append('<tr><td>' +item.id+'</td>'+
		 						'<td><a href="/beer/'+item.id+'">'+item.nome+'</a></td>'+
		 						'<td>'+item.paisOrigem+'</td>'+
		 						'<td>'+item.volume+'</td>'+
		 						'<td>'+item.valor+'</td>'+
		 						'<td>'+item.tipo+'</td>'+
		 						'<td><a class="text-danger" href="/beer/remover/'+item.id+'"><span class="red glyphicon glyphicon-remove"></span></a></td>'+
		 						'</tr>'
		 						);
		 				console.log(item.nome);
		 			});
		 		}
		 	});
	 	});
	 	
	 	
	 });
</script>
</html>